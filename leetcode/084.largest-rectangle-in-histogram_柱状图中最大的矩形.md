[84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](https://leetcode.cn/problems/largest-rectangle-in-histogram/)

å›°éš¾

ç»™å®šÂ _n_Â ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚

æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

**ç¤ºä¾‹ 1:**

![](https://assets.leetcode.com/uploads/2021/01/04/histogram.jpg)

**è¾“å…¥ï¼š** heights = [2,1,5,6,2,3]
**è¾“å‡ºï¼š** 10
**è§£é‡Šï¼š** æœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º 10

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/01/04/histogram-1.jpg)

**è¾“å…¥ï¼š** heights = [2,4]
**è¾“å‡ºï¼š** 4

**æç¤ºï¼š**

- `1 <= heights.length <=10âµ`
- `0 <= heights[i] <= 10â´`
---- ----
### æ ˆ ä¿å­˜ä¸¤ç«¯æ›´å°çš„ä¸‹æ ‡ä½ç½®
æšä¸¾æ¯ä¸ªé«˜åº¦ï¼Œæ‰¾æ¯ä¸ªé«˜åº¦å·¦å³ä¸¤è¾¹é¦–ä¸ªä½äºè¿™ä¸ªé«˜åº¦çš„ä½ç½®ã€‚
```
                 [2, 1, 5, 6, 2, 3]

                           *      
                        *  *      
                        *  *      
                        *  *     *
                  *     *  *  *  *
                  *  *  *  *  *  *
          ä¸‹æ ‡ï¼š   0  1  2  3  4  5
 å·¦è¾¹æ¯”å½“å‰å°çš„ä¸‹æ ‡ -1 -1  1  2  1  4 
 å³è¾¹æ¯”å½“å‰å°çš„ä¸‹æ ‡  1  6  4  4  6  6
                           _
                        _  *
                        *  *
                        *  *
                 _      *  *
                 *      *  *
                 *      *  *  [* * * *]
                 -      -  -        _
                2*1    5*2   2*4    * 
                    1*6   6*1   3*1 * 
                   [******]         * 
                                    _
```

```cpp
class Solution {
public:
    int largestRectangleArea(vector<int>& heights) {
        int n = heights.size();
        vector<int> left(n, -1);
        stack<int> st;
        // é€šè¿‡stackå¾—åˆ° ä¸€ä¸ªé•¿ä¸ºnçš„æ•°ç»„ï¼Œä¿å­˜ç€ å½“å‰æœ€å°çš„å·¦ç«¯ç‚¹ä½ç½®
        for (int i = 0; i < n; ++i) {
            while (!st.empty() && heights[st.top()] >= heights[i]) {
                st.pop();
            }
            if (!st.empty()) {
                left[i] = st.top();
            }
            st.push(i);
        }

        vector<int> right(n, n);
        st = {};
        for (int i = n-1; i >=0; i--) {
            while (!st.empty() && heights[i] <= heights[st.top()]) {
                st.pop();
            }
            if (!st.empty()) {
                right[i] = st.top();
            }
            st.push(i);
        }

        int ans = 0;
        for (int i = 0; i <n; ++i) {
            ans = max(ans, heights[i]*(right[i]-left[i]-1));
        }
        return ans;
    }
};
```


### æ ˆ ä¸€æ¬¡éå†
[æ‰¾ä¸¤è¾¹ç¬¬ä¸€ä¸ªå°äºå®ƒçš„å€¼ - powcai](https://leetcode.cn/problems/largest-rectangle-in-histogram/solutions/7652/zhao-liang-bian-di-yi-ge-xiao-yu-ta-de-zhi-by-powc)
[å•è°ƒæ ˆå…¥é—¨ï¼Œä½¿ç”¨å•è°ƒæ ˆå¿«é€Ÿå¯»æ‰¾è¾¹ç•Œ - lkaruga](https://leetcode.cn/problems/largest-rectangle-in-histogram/solutions/108083/84-by-ikaruga)
[æš´åŠ›è§£æ³•ã€æ ˆï¼ˆå•è°ƒæ ˆã€å“¨å…µæŠ€å·§ï¼‰ - liweiwei1419](https://leetcode.cn/problems/largest-rectangle-in-histogram/solutions/142012/bao-li-jie-fa-zhan-by-liweiwei1419)


å“¨å…µğŸ’‚
æˆ‘ä»¬å¯ä»¥åœ¨è¾“å…¥æ•°ç»„çš„ä¸¤ç«¯åŠ ä¸Šä¸¤ä¸ªé«˜åº¦ä¸º 0 ï¼ˆæˆ–è€…æ˜¯ 0.5ï¼Œåªè¦æ¯” 1 ä¸¥æ ¼å°éƒ½è¡Œï¼‰çš„æŸ±å½¢

1. å¯¹äºä¸€ä¸ªé«˜åº¦ï¼Œå¦‚æœèƒ½å¾—åˆ°å‘å·¦å’Œå‘å³çš„è¾¹ç•Œ
2. é‚£ä¹ˆå°±èƒ½å¯¹æ¯ä¸ªé«˜åº¦æ±‚ä¸€æ¬¡é¢ç§¯
3. éå†æ‰€æœ‰é«˜åº¦ï¼Œå³å¯å¾—å‡ºæœ€å¤§é¢ç§¯
4. ä½¿ç”¨å•è°ƒæ ˆï¼Œåœ¨å‡ºæ ˆæ“ä½œæ—¶å¾—åˆ°å‰åè¾¹ç•Œå¹¶è®¡ç®—é¢ç§¯

- æ ˆé‡Œé¢åé¢æ¯”å‰é¢å¤§çš„æ—¶å€™æ‰å‹å…¥ï¼Œç›¸å½“äºé¡ºåºå‹å…¥ï¼Œ
- å½“å½“å‰å€¼æ¯”æ ˆé¡¶çš„å€¼å°çš„æ—¶å€™ï¼Œ
    - ç›¸å½“äºä¸¤ä¸ªæ¯”æ ˆé¡¶å°çš„å€¼æŠŠæ ˆé¡¶ä½ç½®çš„æ•°å¡åœ¨ä¸­é—´ï¼Œ
    - æ¯”å¦‚5ï¼Œ6ï¼Œ2ï¼Œæ ˆé¡¶æ•°ä¸º6
    - æ­¤æ—¶å¯ä»¥è®¡ç®—æ ˆé¡¶6å›´æˆçš„çŸ©å½¢é¢ç§¯

```cpp
class Solution {
public:
    int largestRectangleArea(vector<int>& heights) {
        stack<int> st;
        heights.insert(heights.begin(), 0);
        heights.push_back(0);
        int n = heights.size();
        int maxarea = 0;

        for (int i = 0; i < n; ++i) {
            while (!st.empty() && heights[st.top()] > heights[i]) {
                int curr = st.top();
                st.pop();
                int area = heights[curr] * (i - st.top()-1);
                maxarea = max(area, maxarea);
            }
            st.push(i);
        }
        return maxarea;
    }
};
```
#top-100-liked; #stack;  
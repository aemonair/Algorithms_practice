[547. çœä»½æ•°é‡](https://leetcode.cn/problems/number-of-provinces/)

ä¸­ç­‰

æœ‰Â `n`Â ä¸ªåŸå¸‚ï¼Œå…¶ä¸­ä¸€äº›å½¼æ­¤ç›¸è¿ï¼Œå¦ä¸€äº›æ²¡æœ‰ç›¸è¿ã€‚å¦‚æœåŸå¸‚Â `a`Â ä¸åŸå¸‚Â `b`Â ç›´æ¥ç›¸è¿ï¼Œä¸”åŸå¸‚Â `b`Â ä¸åŸå¸‚Â `c`Â ç›´æ¥ç›¸è¿ï¼Œé‚£ä¹ˆåŸå¸‚Â `a`Â ä¸åŸå¸‚Â `c`Â é—´æ¥ç›¸è¿ã€‚

**çœä»½**Â æ˜¯ä¸€ç»„ç›´æ¥æˆ–é—´æ¥ç›¸è¿çš„åŸå¸‚ï¼Œç»„å†…ä¸å«å…¶ä»–æ²¡æœ‰ç›¸è¿çš„åŸå¸‚ã€‚

ç»™ä½ ä¸€ä¸ªÂ `n x n`Â çš„çŸ©é˜µÂ `isConnected`Â ï¼Œå…¶ä¸­Â `isConnected[i][j] = 1`è¡¨ç¤ºç¬¬Â `i`Â ä¸ªåŸå¸‚å’Œç¬¬Â `j`Â ä¸ªåŸå¸‚ç›´æ¥ç›¸è¿ï¼Œè€ŒÂ `isConnected[i][j] = 0`è¡¨ç¤ºäºŒè€…ä¸ç›´æ¥ç›¸è¿ã€‚

è¿”å›çŸ©é˜µä¸­Â **çœä»½**Â çš„æ•°é‡ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/12/24/graph1.jpg)

**è¾“å…¥ï¼š** isConnected = `[[1,1,0],[1,1,0],[0,0,1]]`  
**è¾“å‡ºï¼š** 2

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2020/12/24/graph2.jpg)

**è¾“å…¥ï¼š** isConnected = `[[1,0,0],[0,1,0],[0,0,1]]`  
**è¾“å‡ºï¼š** 3

**æç¤ºï¼š**

- `1 <= n <= 200`
- `n == isConnected.length`
- `n == isConnected[i].length`
- `isConnected[i][j]`Â ä¸ºÂ `1`Â æˆ–Â `0`
- `isConnected[i][i] == 1`
- `isConnected[i][j] == isConnected[j][i]`

---- ----
é’ˆå¯¹ç”¨ä¾‹  **è¾“å…¥**ï¼š`isConnected = [[1,1,0],[1,1,0],[0,0,1]]`

**è§£é‡Š**ï¼š

- `isConnected[0][1] = 1`Â è¡¨ç¤ºåŸå¸‚ 1 å’ŒåŸå¸‚ 2 ç›´æ¥ç›¸è¿ã€‚
- `isConnected[1][0] = 1`Â è¡¨ç¤ºåŸå¸‚ 2 å’ŒåŸå¸‚ 1 ç›´æ¥ç›¸è¿ã€‚
- `isConnected[2][2] = 1`Â è¡¨ç¤ºåŸå¸‚ 3 è‡ªå·±è¿è‡ªå·±ï¼ˆå³åŸå¸‚ 3 æ˜¯å­¤ç«‹çš„ï¼‰ã€‚


ä½¿ç”¨å›¾æœç´¢ç®—æ³•ä»å„ä¸ªè¿é€šåŸŸçš„ä»»ä¸€é¡¶ç‚¹å¼€å§‹éå†æ•´ä¸ªè¿é€šåŸŸï¼Œéå†çš„è¿‡ç¨‹ä¸­å¯¹ `bool[] visited` æ•°ç»„è¿›è¡Œæ ‡è®°ï¼Œéå†å®Œå½“å‰è¿é€šåŸŸä¹‹åï¼Œè‹¥ä»æœ‰é¡¶ç‚¹æœªè¢«è®¿é—®ï¼Œè¯´æ˜åˆæ˜¯ä¸€ä¸ªæ–°çš„è¿é€šåŸŸï¼Œä½¿ç”¨ cnt ç´¯è®¡å½“å‰éå†è¿‡çš„è¿é€šåŸŸçš„æ•°é‡ã€‚

[DFS + BFS + å¹¶æŸ¥é›†ï¼Œ3 ç§æ–¹æ³•è®¡ç®—æ— å‘å›¾è¿é€šåŸŸæ•°é‡ - Sweetiee ğŸ¬](https://leetcode.cn/problems/number-of-provinces/solutions/550179/dfs-bfs-bing-cha-ji-3-chong-fang-fa-ji-s-edkl/)
### DFS
```cpp
class Solution {
public:
    int findCircleNum(vector<vector<int>>& isConnected) {
        int n = isConnected.size();
        vector<bool> visited(n);
        int cnt = 0;
        auto dfs = [&](auto &&dfs, int i)-> void {
            visited[i] = true;
            for (int j = 0; j < n; j++) {
                if (isConnected[i][j] == 1 && !visited[j]) {
                    dfs(dfs, j);
                }
            }
        };
        for (int i = 0; i < n; ++i) {
            if (!visited[i]) {
                cnt++;
                dfs(dfs, i);
            }
        }
        return cnt;
    }
};
```
- DFS
    - `visited[i] = true;`ï¼šæ ‡è®°å½“å‰åŸå¸‚Â `i`Â å·²ç»è¢«è®¿é—®è¿‡ã€‚
    - `for (int j = 0; j < n; j++) { ... }`ï¼šéå†æ‰€æœ‰åŸå¸‚ï¼Œæ£€æŸ¥å½“å‰åŸå¸‚Â `i`Â æ˜¯å¦ä¸åŸå¸‚Â `j`Â ç›´æ¥ç›¸è¿ä¸”åŸå¸‚Â `j`Â å°šæœªè¢«è®¿é—®è¿‡ã€‚
    - `if (isConnected[i][j] == 1 && !visited[j]) { dfs(dfs, j); }`ï¼šå¦‚æœåŸå¸‚Â `i`Â å’ŒåŸå¸‚Â `j`Â ç›´æ¥ç›¸è¿ä¸”åŸå¸‚Â `j`Â å°šæœªè¢«è®¿é—®è¿‡ï¼Œåˆ™é€’å½’è°ƒç”¨Â `dfs`Â è®¿é—®åŸå¸‚Â `j`ã€‚
- mainå‡½æ•°
    - `for (int i = 0; i < n; ++i) { ... }`ï¼šéå†æ‰€æœ‰åŸå¸‚ã€‚
    - `if (!visited[i]) { cnt++; dfs(dfs, i); }`ï¼šå¦‚æœåŸå¸‚Â `i`Â å°šæœªè¢«è®¿é—®è¿‡ï¼Œåˆ™è¯´æ˜å‘ç°äº†ä¸€ä¸ªæ–°çš„åŸå¸‚ç¾¤ï¼Œå¢åŠ è®¡æ•°å™¨Â `cnt`Â å¹¶è°ƒç”¨Â `dfs`Â è®¿é—®è¯¥åŸå¸‚ç¾¤ä¸­çš„æ‰€æœ‰åŸå¸‚ã€‚

1. åˆå§‹åŒ–Â `visited`Â æ•°ç»„ä¸ºÂ `[false, false, false]`ï¼Œ`cnt`Â ä¸º 0ã€‚
2. éå†åŸå¸‚ 1ï¼š
    - åŸå¸‚ 1 æœªè¢«è®¿é—®è¿‡ï¼Œ`cnt`Â å¢åŠ  1ï¼Œå˜ä¸º 1ã€‚
    - è°ƒç”¨Â `dfs(0)`ï¼š
        - æ ‡è®°åŸå¸‚ 1 ä¸ºå·²è®¿é—®ã€‚
        - æ£€æŸ¥åŸå¸‚ 1 çš„é‚»å±…åŸå¸‚ 2ï¼ŒåŸå¸‚ 2 æœªè¢«è®¿é—®è¿‡ï¼Œè°ƒç”¨Â `dfs(1)`ï¼š
            - æ ‡è®°åŸå¸‚ 2 ä¸ºå·²è®¿é—®ã€‚
            - æ£€æŸ¥åŸå¸‚ 2 çš„é‚»å±…åŸå¸‚ 1ï¼ŒåŸå¸‚ 1 å·²è¢«è®¿é—®è¿‡ï¼Œä¸å†ç»§ç»­ã€‚
3. éå†åŸå¸‚ 2ï¼š
    - åŸå¸‚ 2 å·²è¢«è®¿é—®è¿‡ï¼Œè·³è¿‡ã€‚
4. éå†åŸå¸‚ 3ï¼š
    - åŸå¸‚ 3 æœªè¢«è®¿é—®è¿‡ï¼Œ`cnt`Â å¢åŠ  1ï¼Œå˜ä¸º 2ã€‚
    - è°ƒç”¨Â `dfs(2)`ï¼š
        - æ ‡è®°åŸå¸‚ 3 ä¸ºå·²è®¿é—®ã€‚
        - æ£€æŸ¥åŸå¸‚ 3 çš„é‚»å±…ï¼Œæ²¡æœ‰æœªè¢«è®¿é—®çš„é‚»å±…ã€‚

æœ€ç»ˆÂ `cnt`Â ä¸º 2ï¼Œè¡¨ç¤ºæœ‰ä¸¤ä¸ªç‹¬ç«‹çš„åŸå¸‚ç¾¤ï¼š{1, 2} å’Œ {3}ã€‚

é’ˆå¯¹ç”¨ä¾‹ **è¾“å…¥**ï¼š`isConnected = [[1,0,0],[0,1,0],[0,0,1]]`

**è§£é‡Š**ï¼š

- `isConnected[0][0] = 1`Â è¡¨ç¤ºåŸå¸‚ 1 è‡ªå·±è¿è‡ªå·±ã€‚
- `isConnected[1][1] = 1`Â è¡¨ç¤ºåŸå¸‚ 2 è‡ªå·±è¿è‡ªå·±ã€‚
- `isConnected[2][2] = 1`Â è¡¨ç¤ºåŸå¸‚ 3 è‡ªå·±è¿è‡ªå·±ã€‚

1. åˆå§‹åŒ–Â `visited`Â æ•°ç»„ä¸ºÂ `[false, false, false]`ï¼Œ`cnt`Â ä¸º 0ã€‚
2. éå†åŸå¸‚ 1ï¼š
    - åŸå¸‚ 1 æœªè¢«è®¿é—®è¿‡ï¼Œ`cnt`Â å¢åŠ  1ï¼Œå˜ä¸º 1ã€‚
    - è°ƒç”¨Â `dfs(0)`ï¼š
        - æ ‡è®°åŸå¸‚ 1 ä¸ºå·²è®¿é—®ã€‚
        - æ£€æŸ¥åŸå¸‚ 1 çš„é‚»å±…ï¼Œæ²¡æœ‰æœªè¢«è®¿é—®çš„é‚»å±…ã€‚
3. éå†åŸå¸‚ 2ï¼š
    - åŸå¸‚ 2 æœªè¢«è®¿é—®è¿‡ï¼Œ`cnt`Â å¢åŠ  1ï¼Œå˜ä¸º 2ã€‚
    - è°ƒç”¨Â `dfs(1)`ï¼š
        - æ ‡è®°åŸå¸‚ 2 ä¸ºå·²è®¿é—®ã€‚
        - æ£€æŸ¥åŸå¸‚ 2 çš„é‚»å±…ï¼Œæ²¡æœ‰æœªè¢«è®¿é—®çš„é‚»å±…ã€‚
4. éå†åŸå¸‚ 3ï¼š
    - åŸå¸‚ 3 æœªè¢«è®¿é—®è¿‡ï¼Œ`cnt`Â å¢åŠ  1ï¼Œå˜ä¸º 3ã€‚
    - è°ƒç”¨Â `dfs(2)`ï¼š
        - æ ‡è®°åŸå¸‚ 3 ä¸ºå·²è®¿é—®ã€‚
        - æ£€æŸ¥åŸå¸‚ 3 çš„é‚»å±…ï¼Œæ²¡æœ‰æœªè¢«è®¿é—®çš„é‚»å±…ã€‚

æœ€ç»ˆÂ `cnt`Â ä¸º 3ï¼Œè¡¨ç¤ºæœ‰ä¸‰ä¸ªç‹¬ç«‹çš„åŸå¸‚ç¾¤ï¼š{1}ã€{2} å’Œ {3}ã€‚

----
### BFS

```cpp
class Solution {
public:
    int findCircleNum(vector<vector<int>>& isConnected) {
        int n = isConnected.size();
        vector<bool> visited(n);
        int cnt = 0;
        queue<int> queue;
        for (int i = 0; i < n; ++i) {
            if (!visited[i]) {
                cnt++;
                queue.push(i);
                visited[i] = true;
                while (!queue.empty()) {
                    int v = queue.front();
                    queue.pop();
                    for (int w = 0; w < n; ++w) {
                        if (isConnected[v][w] == 1 && !visited[w]){
                            visited[w] = true;
                            queue.push(w);
                        }
                    }
                }
            }
        }
        return cnt;
    }
};
```

#Leetcode-75; #graph; #depth-first-search;